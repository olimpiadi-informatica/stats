{"version":3,"file":"static/chunks/app/contestants/page-7ad9344ae528c7d9.js","mappings":"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","sources":["webpack://_N_E/?078c","webpack://_N_E/./app/contestants/contestant-grid.tsx","webpack://_N_E/./components/image.tsx","webpack://_N_E/./components/medal.tsx","webpack://_N_E/./components/placeholder.tsx","webpack://_N_E/./components/user.tsx"],"sourcesContent":["import(/* webpackMode: \"eager\", webpackExports: [\"ContestantGrid\"] */ \"/home/runner/work/oii-stats/oii-stats/frontend/app/contestants/contestant-grid.tsx\");\n","\"use client\";\n\nimport Link from \"next/link\";\nimport { useEffect } from \"react\";\n\nimport { VirtuosoGrid } from \"react-virtuoso\";\nimport { preload } from \"swr\";\nimport useSWRInfinite from \"swr/infinite\";\n\nimport { Loading } from \"~/components/placeholder\";\nimport { UserCard } from \"~/components/user\";\nimport { Users } from \"~/lib/users\";\n\ntype Props = {\n  firstChunk: Users;\n};\n\nexport function ContestantGrid({ firstChunk }: Props) {\n  const { data, size, setSize } = useSWRInfinite<Users>(\n    (index) => [\"competitors\", index],\n    contestantsFetcher,\n    {\n      revalidateIfStale: false,\n      revalidateOnFocus: false,\n      revalidateFirstPage: false,\n      parallel: true,\n    },\n  );\n\n  useEffect(() => {\n    preload([\"competitors\", 1], contestantsFetcher);\n  }, []);\n\n  return (\n    <VirtuosoGrid\n      useWindowScroll\n      className=\"grow\"\n      listClassName=\"grid xl:grid-cols-2 gap-4 mb-4\"\n      initialItemCount={16}\n      data={data?.flat() ?? firstChunk}\n      endReached={() => {\n        preload([\"competitors\", size + 1], contestantsFetcher);\n        setSize(size + 1);\n      }}\n      itemContent={(_index, user) => (\n        <Link href={`/contestant/${user.contestant.id}`}>\n          <UserCard user={user} />\n        </Link>\n      )}\n      components={{ Footer: Loading }}\n    />\n  );\n}\n\nasync function contestantsFetcher([_endpoint, page]: [string, string]) {\n  const resp = await fetch(`/api/contestants/${page}`);\n  return resp.json();\n}\n","import type { StaticImageData } from \"next/image\";\n\ntype Props = {\n  src: StaticImageData & { srcSet?: string };\n  alt: string;\n  className?: string;\n};\n\nexport function Image({ src, alt, className }: Props) {\n  return (\n    <img\n      src={src.src}\n      srcSet={src.srcSet}\n      width={src.width}\n      height={src.height}\n      alt={alt}\n      loading=\"lazy\"\n      className={className}\n    />\n  );\n}\n","import { ReactNode } from \"react\";\n\nimport clsx from \"clsx\";\nimport { MedalIcon } from \"lucide-react\";\n\ntype MedalsProps = {\n  gold: ReactNode;\n  silver: ReactNode;\n  bronze: ReactNode;\n};\n\nexport function Medals({ gold, silver, bronze }: MedalsProps) {\n  return (\n    <div className=\"flex justify-center gap-4\">\n      <Medal type=\"gold\">{gold}</Medal>\n      <Medal type=\"silver\">{silver}</Medal>\n      <Medal type=\"bronze\">{bronze}</Medal>\n    </div>\n  );\n}\n\ntype MedalProps = {\n  type: string | null;\n  children: ReactNode;\n};\n\nexport function Medal({ type, children }: MedalProps) {\n  return (\n    <span>\n      <MedalIcon className={clsx(\"inline-block last:*:hidden\", color(type))} />\n      <span className=\"mx-1.5 inline-block\">{children ?? \"N/A\"}</span>\n    </span>\n  );\n}\n\nfunction color(type: string | null) {\n  switch (type) {\n    case \"gold\":\n      return \"stroke-amber-400\";\n    case \"silver\":\n      return \"stroke-gray-400\";\n    case \"bronze\":\n      return \"stroke-amber-600\";\n    default:\n      return \"hidden\";\n  }\n}\n","import { Card, CardBody } from \"@olinfo/react-components\";\n\nimport { Medals } from \"~/components/medal\";\n\nexport function CardPlaceholder() {\n  return (\n    <Card className=\"h-full\">\n      <div className=\"skeleton size-52 flex-none rounded-none max-sm:mx-auto max-sm:mt-4 max-sm:rounded-box\" />\n      <CardBody title={<span className=\"skeleton my-1 inline-block h-5 w-56\" />}>\n        <div className=\"skeleton my-1 h-4 w-48\" />\n        <div className=\"skeleton my-1 h-4 w-64\" />\n        <div className=\"mt-2\">\n          <Medals\n            gold={<span className=\"skeleton inline-block h-4 w-5 translate-y-1/4 scale-y-150\" />}\n            silver={<span className=\"skeleton inline-block h-4 w-5 translate-y-1/4 scale-y-150\" />}\n            bronze={<span className=\"skeleton inline-block h-4 w-5 translate-y-1/4 scale-y-150\" />}\n          />\n        </div>\n      </CardBody>\n    </Card>\n  );\n}\n\nexport function Loading() {\n  return (\n    <div className=\"grid gap-4 xl:grid-cols-2\">\n      <CardPlaceholder />\n      <CardPlaceholder />\n      <CardPlaceholder />\n      <CardPlaceholder />\n    </div>\n  );\n}\n","import type { StaticImageData } from \"next/image\";\nimport Link from \"next/link\";\n\nimport { Card, CardBody } from \"@olinfo/react-components\";\nimport clsx from \"clsx\";\n\nimport { Image } from \"~/components/image\";\nimport { Medals } from \"~/components/medal\";\nimport { Contestant } from \"~/lib/common\";\nimport { User } from \"~/lib/user\";\nimport { Users } from \"~/lib/users\";\n\nexport function UserCard({ user, links }: { user: User | Users[number]; links?: boolean }) {\n  return (\n    <Card className=\"h-full\">\n      <div className=\"relative min-h-52 w-52 self-stretch max-sm:mx-auto max-sm:mt-4\">\n        <ContestantImage\n          contestant={user.contestant}\n          image={user.image}\n          className=\"absolute inset-0 size-full max-sm:rounded-box\"\n        />\n      </div>\n      <CardBody title={`${user.contestant.first_name ?? \"\"} ${user.contestant.last_name}`}>\n        <div>\n          <span className=\"font-semibold\">Partecipazioni:</span>{\" \"}\n          {user.participations.map((p) => p.year).join(\", \")}\n        </div>\n        <div>\n          <span className=\"font-semibold\">Miglior piazzamento:</span> {user.best_rank ?? \"N/A\"}Â°\n          posto\n        </div>\n        {links && user.contestant.username && (\n          <div>\n            <span className=\"font-semibold\">Profilo su training.olinfo.it:</span>{\" \"}\n            <Link\n              href={`https://training.olinfo.it/#/user/${user.contestant.username}/profile`}\n              className=\"link\">\n              {user.contestant.username}\n            </Link>\n          </div>\n        )}\n        <div className=\"mt-2\">\n          <Medals {...user.num_medals} />\n        </div>\n      </CardBody>\n    </Card>\n  );\n}\n\nexport function ContestantImage({\n  contestant,\n  image,\n  className,\n}: {\n  contestant: Contestant;\n  image: StaticImageData | null;\n  className?: string;\n}) {\n  return image ? (\n    <Image\n      src={image}\n      alt={`Foto di ${contestant.first_name ?? \"\"} ${contestant.last_name}`}\n      className={clsx(\"object-cover\", className)}\n    />\n  ) : (\n    <div\n      className={clsx(\n        \"flex items-center justify-center bg-neutral p-4 text-7xl font-bold text-neutral-content\",\n        className,\n      )}>\n      {(contestant.first_name?.[0] ?? \"\") + contestant.last_name[0]}\n    </div>\n  );\n}\n"],"names":["Promise","resolve","then","__webpack_require__","bind","ContestantGrid","param","data","firstChunk","size","setSize","useSWRInfinite","index","contestantsFetcher","revalidateIfStale","revalidateOnFocus","revalidateFirstPage","parallel","useEffect","preload","react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__","jsx","VirtuosoGrid","useWindowScroll","className","listClassName","initialItemCount","flat","endReached","itemContent","_index","user","Link","href","concat","contestant","id","UserCard","components","Footer","Loading","_endpoint","page","resp","fetch","json","Image","src","alt","img","srcSet","width","height","loading","Medals","gold","silver","bronze","jsxs","div","Medal","type","children","span","MedalIcon","clsx","color","CardPlaceholder","Card","CardBody","title","links","ContestantImage","image","first_name","last_name","participations","map","p","year","join","best_rank","username","num_medals"],"sourceRoot":""}